
# 분류 모델을 .tflite 파일로 바꿔서 플러터 앱에 내장 시키기

온디바이스 AI 로 네트워크 연결이 없는 상태에서도 모델을 실행시킬 수 있게 하는 것이 팀의 도전과제가 되었다

인터넷 연결이 되어있는 상태라면 백단으로 이미지를 보내서 분류 모델에 입력하고, 그 출력값을 다시 받아서 앱 화면에 띄워주는 식으로 되었겠지만

우리는 앱 자체에 모델을 넣어주어야 했다.

모델을 앱에 넣는 것은 너무 쉬웠다. 드래그앤 드롭으로 assets 폴더에 넣어주면 끝.

이제 사용자가 사용할 수 있게 해줘야 했다.

실험용 모델의 입력값은 (None,224,224,3) 의 정수 배열, 출력값은 (1,3) 의 실수 배열이다. 

그리고 flutter 에는 tflite_flutter 라이브러리가 존재하는데 .tflite 파일로된 모델을 사용할 수 있게 해주는 라이브러리다.

이 라이브러리를 이용해 입출력이 가능해졌다.

사용자의 갤러리에서 이미지 파일을 받아와 정수 배열로 변환해 모델에 넣고 그 결과를 화면에 뿌려줘야 한다.

오늘은 미리 assets에 넣어준 갑오징어, 갈치, 감성돔 이미지 파일로 모델을 돌려봤는데

결과가 제대로 나오지 않았다. 

예상하기로 이미지를 224 * 224 * 3  의 배열로 리사이징하면서 결과가 바뀌었거나 RGB 와  BGR 이 바뀌었거나 그런 것 같다.

내일은 새로운 모델로 사용자 이미지를 받아서 모델을 inference 해봐야겠다.




